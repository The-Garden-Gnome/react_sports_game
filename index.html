<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script type="text/babel">
        function App(props) {
            return (
                <Game />
            )
        }

        class Game extends React.Component {
            constructor(props) {
                super(props)

                this.state = {
                    venue:"Firebase Delphi",
                }
            }

                render() {
                    return (
                        <div className="mainContainer">
                        <div className="header">
                            <img src="media/destiny_icon.png" id="logo" />
                            <h1>Welcome to {this.state.venue}!</h1>
                        </div>
                        <div className="mainBody">
                            <div className="alphaLeft"><TeamOne />
                            </div>
                            <div className="bravoRight"><TeamTwo />
                            </div>
                        </div>
                            <div className="bottom">
                            </div>
                        </div>
                    )
                }
            }
        

        class TeamOne extends React.Component {
            constructor(props) {
                super(props)

                this.state = {
                    name: "Alpha(Home Team)",
                    logo: <img src="media/alpha.png" />,
                    shotsTaken: 0,
                    teamScore: 0,
                    shotPercentage: 0,
                    className:"hidden"
                }

            }

            takeShot = (event) => {
                this.setState((currentState) => {
                    const newShotsTaken = currentState.shotsTaken + 1
                    const newTeamScore = currentState.teamScore + 1
                    let myAudioElement = new Audio('media/vex_mythoclast.mp3');
                    myAudioElement.play()
                    let newClassName
                    newClassName = "display"
                    if (Math.round(Math.random()) > 0) {
                        return {
                            shotsTaken: newShotsTaken,
                            teamScore: newTeamScore,
                            className: newClassName,
                            shotPercentage: (currentState.shotsTaken / currentState.teamScore),
                        }
                    }
                    else {
                        return {
                            className: newClassName,
                            shotPercentage: (currentState.shotsTaken / currentState.teamScore),
                            shotsTaken: newShotsTaken
                        }
                    }

                }
                )
            }

            render() {
                return (
                    <div className="">
                        <h2>{this.state.name}</h2>
                        {this.state.logo}
                        <ul>
                            <li><strong>Shots Taken: </strong>{this.state.shotsTaken}</li>
                            <li><strong>Team Score: </strong>{this.state.teamScore}</li>
                            <li className={this.state.className}><strong>Shot Percentage: </strong>{this.state.shotPercentage}</li>
                        </ul>
                        <br />
                        <button onClick={this.takeShot}>Fire!</button>
                    </div>
                )
            }
        }

        class TeamTwo extends React.Component {
            constructor(props) {
                super(props);

                this.state = {
                    name: "Bravo(Away Team)",
                    logo: <img src="media/bravo.png" />,
                    shotsTaken: 0,
                    teamScore: 0,
                    shotPercentage: 0,
                }
            }

            takeShot = (event) => {
                this.setState((currentState) => {
                    const newShotsTaken = currentState.shotsTaken + 1
                    const newTeamScore = currentState.teamScore + 1
                    let myAudioElement = new Audio('media/vex_mythoclast.mp3');
                    myAudioElement.play()
                    if (Math.round(Math.random()) > 0) {
                        return {
                            shotsTaken: newShotsTaken,
                            teamScore: newTeamScore
                        }
                    }
                    else {
                        return {
                            shotsTaken: newShotsTaken
                        }
                    }

                }
                )
            }

            render() {
                return (
                    <div>
                        <h2>{this.state.name}</h2>
                        {this.state.logo}
                        <ul>
                            <li><strong>Shots Taken: </strong>{this.state.shotsTaken}</li>
                            <li><strong>Team Score: </strong>{this.state.teamScore}</li>
                        </ul>
                        <br />
                        <button onClick={this.takeShot}>Fire!</button>
                    </div>
                )
            }
        }



        ReactDOM.render(<App />, document.getElementById('root')

        )
    </script>
</body>

</html>